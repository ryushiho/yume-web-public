{% extends "base.html" %}
{% block title %}유저 관리{% endblock %}
{% block header_title %}유저 관리{% endblock %}

{% block content %}
<h1>유저 관리</h1>

<div style="margin-bottom: 1rem;">
    <a href="/users/create" class="btn btn-primary">유저 추가</a>
</div>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>디스코드 ID</th>
        <th>이름(닉네임)</th>
        <th>비고</th>
        <th style="width: 220px;">관리</th>
    </tr>
    </thead>
    <tbody>
    {% for user in users %}
        {% set nickname =
            (user.nickname if user.nickname is defined and user.nickname else
             user.name if user.name is defined and user.name else
             user.display_name if user.display_name is defined and user.display_name else
             user.username if user.username is defined and user.username else
             "-")
        %}
        {% set note =
            (user.note if user.note is defined and user.note else
             user.memo if user.memo is defined and user.memo else
             user.comment if user.comment is defined and user.comment else
             "-")
        %}
        {% set discord_id =
            (user.discord_id if user.discord_id is defined and user.discord_id else
             user.discord if user.discord is defined and user.discord else
             user.discordid if user.discordid is defined and user.discordid else
             "-")
        %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ discord_id }}</td>
            <td>{{ nickname }}</td>
            <td>{{ note }}</td>
            <td>
                <div class="user-actions">
                    <a href="/users/{{ user.id }}" class="btn btn-secondary">
                        상세
                    </a>
                    <a href="/users/{{ user.id }}/edit" class="btn btn-secondary">
                        정보 수정
                    </a>
                    <a href="/users/{{ user.id }}/stats/edit" class="btn btn-primary">
                        전적 수정
                    </a>
                </div>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<style>
.user-actions {
    display: flex;
    gap: 0.3rem;
    flex-wrap: wrap;
}
.user-actions .btn {
    padding: 0.25rem 0.6rem;
    font-size: 0.78rem;
}
</style>
{% endblock %}
