{% extends "base.html" %}

{% block title %}대시보드{% endblock %}
{% block header_title %}대시보드{% endblock %}

{% block content %}
<h1>대시보드</h1>

<div style="display:flex; gap:1rem; margin-bottom:1.5rem; flex-wrap:wrap;">
    <div style="flex:1 1 180px; background:#020617; border-radius:0.75rem; padding:1rem;">
        <div style="font-size:0.8rem; color:#9ca3af;">등록된 유저 수</div>
        <div style="font-size:1.6rem; font-weight:700; margin-top:0.4rem;">
            {{ total_users }}
        </div>
    </div>
    <div style="flex:1 1 180px; background:#020617; border-radius:0.75rem; padding:1rem;">
        <div style="font-size:0.8rem; color:#9ca3af;">블루전 매치 수</div>
        <div style="font-size:1.6rem; font-weight:700; margin-top:0.4rem;">
            {{ total_matches }}
        </div>
    </div>
</div>

<h2 style="margin-top:1.5rem;">최근 블루전 매치</h2>

<table class="table table-striped table-bordered align-middle">
    <thead>
        <tr>
            <th>ID</th>
            <th>모드</th>
            <th>상태</th>
            <th>승차</th>
            <th>턴 수</th>
            <th>시작 시각</th>
            <th>상세</th>
        </tr>
    </thead>
    <tbody>
        {% for m in recent_matches %}
        <tr>
            <td>{{ m.id }}</td>
            <td>{{ m.mode }}</td>
            <td>{{ m.status }}</td>
            <td>{{ m.win_gap is not none and m.win_gap or "-" }}</td>
            <td>{{ m.total_rounds is not none and m.total_rounds or "-" }}</td>
            <td>{{ m.started_at or "-" }}</td>
            <td>
                <a href="/records/{{ m.id }}" class="btn btn-primary btn-sm">전적 보기</a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7" class="text-center">
                아직 기록된 매치가 없습니다.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
